# Feature development workflow

---

## Workflow Steps

### [x] Step: Requirements

Your job is to generate a Product Requirements Document based on the feature description,

First, analyze the provided feature definition and determine unclear aspects. For unclear aspects: - Make informed guesses based on context and industry standards - Only mark with [NEEDS CLARIFICATION: specific question] if: - The choice significantly impacts feature scope or user experience - Multiple reasonable interpretations exist with different implications - No reasonable default exists - Prioritize clarifications by impact: scope > security/privacy > user experience > technical details

Ask up to 5 most priority clarifications to the user. Then, create the document following this template:

```
# Feature Specification: [FEATURE NAME]


## User Stories*


### User Story 1 - [Brief Title]

**Acceptance Scenarios**:

1. **Given** [initial state], **When** [action], **Then** [expected outcome]
2. **Given** [initial state], **When** [action], **Then** [expected outcome]

---

## Requirements*

## Success Criteria*

```

Save the PRD into `e:\keeva30\keevaapp\.zencoder\chats\136fd417-fffb-49f1-ad28-194d3f234d91/requirements.md`.

### [x] Step: Technical Specification

Based on the PRD in `e:\keeva30\keevaapp\.zencoder\chats\136fd417-fffb-49f1-ad28-194d3f234d91/requirements.md`, create a detailed technical specification to be used by a coding agent to implement the feature. Follow this template:

```
# Technical Specification: [FEATURE]

## Technical Context
Language/Version, primary dependencies, etc

## Technical Implementation Brief

Summarize key technical decisions for implementing the feature. Make sure they take into account the existing code as much as possible.

## Source Code Structure

## Contracts

Define addition or changes in data models, DB schemas, APIs, code interfaces etc

## Delivery Phases

Define several incremental deliverables for the feature. Each should be a minimal viable product testable end-to-end.

## Verification Strategy

Define how the coding agent can verify each deliverable it creates. Provide instructions for the agent to perform the verification using available tools (lint/test commands, bash commands) and create helper scripts and tools for more complex result verification.
The verification for each deliverable should be executable by a coding agent using built-in capabilities (lint and test commands from the project, bash commands), pre-generated helper scripts or MCP servers. Research and add to the spec:

- MCP servers that should be installed to help the agent with the verification

- helper scripts that need to be generated in the first phases of the plan to verify complex scenarios that can't be covered by the tests in the project's test framework(s)

- any sample input artifact(s) that are required for verification. Note if these artifacts can be a) generated by the agent; b) discovered by the agent on line; c) must be provided by the user.
```

Save the spec to `e:\keeva30\keevaapp\.zencoder\chats\136fd417-fffb-49f1-ad28-194d3f234d91/spec.md`.

### [x] Step: Implementation Plan

Based on the technical spec in `e:\keeva30\keevaapp\.zencoder\chats\136fd417-fffb-49f1-ad28-194d3f234d91/spec.md`, create a detailed task plan and update `e:\keeva30\keevaapp\.zencoder\chats\136fd417-fffb-49f1-ad28-194d3f234d91/plan.md`. Each task should have task definition, references to contracts to be used/implemented, deliverable definition and verification instructions.

Format each task as

```
### [ ] Step: <task_name>
Task instructions
```

---

## Implementation Tasks

### [ ] Step 1: Enhance CustomToast Component

**Task Definition**: Add support for different toast variants and icons to CustomToast.js

**Contracts**:
- Add new prop `type`: "success" | "info" (default: "success")
- Add new prop `variant`: "default" | "login" (default: "default", optional)
- When type="info", render info icon from Ionicons instead of checkmark-circle
- Maintain backward compatibility with existing usage

**Changes Required**:
- File: `src/helperComponent/CustomToast.js`
- Import additional icon if needed
- Add conditional rendering for icon based on `type` prop
- Update default duration prop to 1000ms (from 500ms) for consistency with feature

**Verification**:
- Component accepts new props without errors
- Icon changes based on `type` prop value
- Default behavior (type="success") still shows checkmark icon
- Run: `npm run lint` if available
- No console errors when component renders

**Deliverable**: Updated CustomToast.js with type and variant support

---

### [ ] Step 2: Update LocationHeader Profile Handler

**Task Definition**: Modify handleProfilePress to use enhanced toast with 1-second duration

**Task Instructions**:
- File: `src/helperComponent/LocationHeader.js`
- In `handleProfilePress()` function (line 158):
  - Keep existing logic structure
  - Update toast props to include: `type="info"` and `duration={1000}`
  - Ensure navigation happens after 1000ms (already does via setTimeout)
  - Verify no token check changes

**Contracts**:
- Toast duration: 1000ms
- Toast type: "info"
- Message: "Please Login First" (unchanged)
- Navigation: Screen1 (unchanged)
- Navigation delay: 1000ms total

**Verification**:
- Code compiles without errors
- handleProfilePress still checks for token
- Toast displays for correct duration
- Navigation timing is appropriate

**Deliverable**: Updated handleProfilePress with enhanced toast

---

### [ ] Step 3: Update LocationHeader Address Handler

**Task Definition**: Modify handleAddressPress to use enhanced toast with 1-second duration

**Task Instructions**:
- File: `src/helperComponent/LocationHeader.js`
- In `handleAddressPress()` function (line 171):
  - Keep existing logic structure
  - Update toast props to include: `type="info"` and `duration={1000}`
  - Ensure navigation happens after 1000ms (already does via setTimeout)
  - Verify no token check changes

**Contracts**:
- Toast duration: 1000ms
- Toast type: "info"
- Message: "Please Login First" (unchanged)
- Navigation: Screen1 (unchanged)
- Navigation delay: 1000ms total

**Verification**:
- Code compiles without errors
- handleAddressPress still checks for token
- Toast displays for correct duration
- Navigation timing is appropriate

**Deliverable**: Updated handleAddressPress with enhanced toast

---

### [ ] Step 4: Integration Testing & Verification

**Task Definition**: Test complete feature flow end-to-end

**Task Instructions**:
1. Run the application on Android or iOS
2. Ensure user is NOT logged in (clear AsyncStorage userToken if needed)
3. Navigate to LocationHeader screen
4. Test Scenario 1 - Profile Press:
   - Tap Profile icon (person icon)
   - Observe: Toast "Please Login First" appears at top
   - Observe: Toast displays for ~1 second
   - Observe: Toast disappears and navigates to Screen1 (login screen)
   - Verify: No console errors in React Native debugger
5. Test Scenario 2 - Address Press:
   - Return from login screen
   - Tap Address section
   - Observe: Toast "Please Login First" appears at top
   - Observe: Toast displays for ~1 second
   - Observe: Toast disappears and navigates to Screen1
   - Verify: No console errors

**Verification Commands**:
```bash
# If available, run linting
npm run lint

# If available, run type checking
npm run typecheck

# If available, run tests
npm test
```

**Deliverable**: Fully tested and working feature with no console errors

**Success Criteria**:
- ✅ Toast appears at top of screen
- ✅ Toast displays for 1 second (1000ms)
- ✅ Toast auto-dismisses
- ✅ Navigation to Screen1 occurs after toast dismissal
- ✅ Works on both Profile and Address actions
- ✅ No console errors or warnings
- ✅ No lint or type errors
